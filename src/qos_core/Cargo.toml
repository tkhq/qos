[package]
name = "qos_core"
version = "0.1.0"
edition = "2021"

[dependencies]
qos_crypto = { path = "../qos_crypto" }
qos_hex = { path = "../qos_hex" }
qos_p256 = { path = "../qos_p256" }

nix = { version = "0.24.1", features = ["socket"], default-features = false }
borsh = { version = "0.9" }

# For AWS Nitro
aws-nitro-enclaves-nsm-api = { version = "0.2.1", default-features = false }
serde_bytes = { version = "0.11", default-features = false }

# Optional
sequoia-openpgp = { git = "https://gitlab.com/sequoia-pgp/sequoia.git", features = ["crypto-rust", "allow-experimental-crypto", "allow-variable-time-crypto"], optional = true, default-features = false }
p256_sequoia_swag = { package = "p256", version = "0.8" }
p256_qos_swag = { package = "p256", version = "0.11" }

[dev-dependencies]
qos_test_primitives = { path = "../qos_test_primitives" }
qos_p256 = { path = "../qos_p256", features = ["mock"] }

[features]
default = ["openpgp"]
# Support for VSOCK
vm = []
# Never use in production - support for mock NSM
mock = []
# Should only be enabled when deploying a node to run the genesis service
openpgp = ["sequoia-openpgp"]
